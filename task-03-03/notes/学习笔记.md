# VueX
### 目标
 - vue 组件通信回顾
 - vuex核心概念和基本使用
 - 购物车案例
 - 模拟实现vuex





组件内状态管理流程

状态管理

- state，驱动应用的数据源
- view， 以声明方式将state 映射到视图
- actions，响应在view上的用户输入导致的状态变化

![](C:\project\code\homework\zwq-task\zwq-task\task-03-03\notes\note-img\1.png)





父组件给子组件传值

- props
- 父组件给子组件通过相应属性传值





EventBus.js-->单纯为了用他事件$emit,$on

import Vue fron ‘...’

export default new Vue() 



![](C:\project\code\homework\zwq-task\zwq-task\task-03-03\notes\note-img\2.png)

其他常见的方式[不推荐]

- $root
- $parent
- $children
- $refs



ref

- 不同标签上使用ref，获取DOM
- 组件上，获取组件实例，这样就能获取组件中定义的方法和属性（容易导致数据管理混乱）



简易的状态管理方案

问题

- 多个视图依赖同一个状态
- 来自不同视图的行为需要变更为同一状态

自己定义一个全局的store.js 来存储数据





什么式Vuex

- 专门为vue.js 设计的状态管理库
- 采用集中式的方式存储需要共享的状态
- 状态管理，解决复杂的组件通信，数据共享
- 集成devtools,提供time-travel 历史回滚功能

什么时候用

- 非必要不用
- 大型单页应用【购物这种】
  - 多个视图依赖同一个状态
  - 来自不同视图的行为需要变更为同一状态







核心概念

- Store
- State
- Getter
- Mutation
- Action
- Module





...mapState()//参数数组或者对象

数组的话

...mapState(['count','msg']) // => count=>State.count, msg=>State.msg

...mapState({

​    'countkey':'count',

​    'msgkey':'msg'

})



Getter

过滤器的意思，可以倒叙输出，或者其他

getters:{

​	reverseMsg(state)(){

​		return state.split()

   }

}

...mapGetters(['reverseMsg'])



Mutation

...mapMutations(['xxx'])